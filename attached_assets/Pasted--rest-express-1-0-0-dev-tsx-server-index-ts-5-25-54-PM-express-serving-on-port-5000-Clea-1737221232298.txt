
> rest-express@1.0.0 dev
> tsx server/index.ts

5:25:54 PM [express] serving on port 5000
Cleaned up stalled videos older than: 2025-01-18T17:15:54.656Z
5:26:07 PM [express] GET /api/user 401 in 2ms
5:26:07 PM [express] GET /api/user 401 in 0ms
5:26:07 PM [express] GET /api/user 401 in 1ms
5:26:21 PM [express] POST /api/login 200 in 209ms :: {"message":"Login successful","user":{"id":2,"u…
5:26:21 PM [express] GET /api/user 304 in 41ms :: {"id":2,"username":"sangonzalezmp@gmail.com","pass…
5:26:21 PM [express] GET /api/videos 304 in 91ms :: [{"id":40,"prompt":"drone shot of a great castle…
5:26:22 PM [express] GET /api/videos/top 304 in 196ms :: [{"id":30,"prompt":"a beautiful anime sunri…
Chat error: GoogleGenerativeAIResponseError: [GoogleGenerativeAI Error]: Candidate was blocked due to SAFETY
    at response.text (file:///home/runner/workspace/node_modules/@google/generative-ai/dist/index.mjs:465:23)
    at <anonymous> (/home/runner/workspace/server/routes.ts:79:35)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {
  response: {
    candidates: [ [Object] ],
    usageMetadata: { promptTokenCount: 64, totalTokenCount: 64 },
    modelVersion: 'gemini-pro',
    text: [Function (anonymous)],
    functionCall: [Function (anonymous)],
    functionCalls: [Function (anonymous)]
  }
}
5:26:34 PM [express] POST /api/chat 500 in 1306ms :: {"error":"Failed to process chat message"}
Missing or invalid API key
5:26:35 PM [express] POST /api/analyze-emotion 401 in 39ms :: {"error":"API key required"}
Chat error: GoogleGenerativeAIFetchError: [GoogleGenerativeAI Error]: Error fetching from https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent: [400 Bad Request] * GenerateContentRequest.contents[3].parts[0].data: required oneof field 'data' must have one initialized field

    at handleResponseNotOk (file:///home/runner/workspace/node_modules/@google/generative-ai/dist/index.mjs:412:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async makeRequest (file:///home/runner/workspace/node_modules/@google/generative-ai/dist/index.mjs:385:9)
    at async generateContent (file:///home/runner/workspace/node_modules/@google/generative-ai/dist/index.mjs:830:22)
    at async ChatSession.sendMessage (file:///home/runner/workspace/node_modules/@google/generative-ai/dist/index.mjs:1144:9)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:77:22) {
  status: 400,
  statusText: 'Bad Request',
  errorDetails: undefined
}
5:26:51 PM [express] POST /api/chat 500 in 189ms :: {"error":"Failed to process chat message"}
Missing or invalid API key
5:26:51 PM [express] POST /api/analyze-emotion 401 in 38ms :: {"error":"API key required"}